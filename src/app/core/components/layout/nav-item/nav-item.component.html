<a [routerLink]="item.route"
   routerLinkActive="bg-gradient-to-r from-primary/15 to-primary/10 font-bold shadow-sm border-l-4 border-primary"
   [routerLinkActiveOptions]="{ exact: false }"
   [class]="linkClass"
   (click)="onClick()">

  <!-- Icon -->
  <div class="mr-3 h-10 w-10 shrink-0 flex items-center justify-center rounded-lg bg-linear-to-br from-muted/50 to-transparent group-hover:from-primary/10 group-hover:to-primary/5 transition-all">
    @if (iconIsEmoji()) {
      <span class="text-xl sm:text-2xl">{{ item.icon }}</span>
    } @else {
      <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
        <path [attr.d]="item.icon"/>
      </svg>
    }
  </div>

  <!-- Label -->
  @if (!layoutService.sidebarCollapsed()) {
    <span class="flex-1 text-base font-semibold transition-all">
      {{ item.label }}
    </span>
  }

  <!-- Collapse indicator -->
  @if (item.children && !layoutService.sidebarCollapsed()) {
    <svg class="h-5 w-5 transition-transform"
         [class.rotate-90]="expanded()"
         fill="currentColor" viewBox="0 0 24 24">
      <path d="M9 5l7 7-7 7"/>
    </svg>
  }
</a>

<!-- Child items -->
@if (item.children && expanded() && !layoutService.sidebarCollapsed()) {
  <div class="ml-8 mt-2 space-y-2">
    @for (child of item.children; track child.route) {
      <app-nav-item [item]="child" (navigate)="onChildNavigate()"/>
    }
  </div>
}
