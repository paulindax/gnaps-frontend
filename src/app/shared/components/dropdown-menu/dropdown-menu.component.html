@if (isOpen) {
  <!-- Backdrop -->
  <div
    class="fixed inset-0 z-40"
    (click)="onBackdropClick()"
  ></div>

  <!-- Dropdown Menu -->
  <div
    #dropdownMenu
    class="dropdown-menu absolute right-0 top-full mt-2 w-56 rounded-lg border border-border/50 bg-card shadow-xl z-50"
  >
    <div class="py-1">
      @for (item of items; track item.action) {
        @if (shouldShowItem(item)) {
          <!-- Divider -->
          @if (item.dividerBefore) {
            <div class="border-t border-border/30 my-1"></div>
          }

          <!-- Menu Item -->
          <button
            (click)="onItemClick(item.action, $event)"
            [class]="getItemClasses(item)"
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="item.icon"/>
            </svg>
            {{ item.label }}
          </button>
        }
      }
    </div>
  </div>
}
