<div class="w-full min-h-screen bg-background">
  <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 sm:py-8 lg:px-8 lg:py-10">
    <!-- Header -->
    <div class="mb-8 sm:mb-10 lg:mb-12">
      <h1 class="text-2xl font-bold tracking-tight sm:text-3xl lg:text-4xl">Payment History</h1>
    </div>

    <!-- Desktop Table View -->
    <div class="hidden overflow-hidden rounded-lg border-2 border-border bg-card shadow-sm lg:block">
    <table class="min-w-full divide-y divide-border">
      <thead class="bg-muted">
        <tr>
          <th class="px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wide">Reference</th>
          <th class="px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wide">Amount</th>
          <th class="px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wide">Status</th>
          <th class="px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wide">Date</th>
          <th class="px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wide">Actions</th>
        </tr>
      </thead>
      <tbody class="bg-card divide-y divide-border">
        @if (payments(); as paymentList) {
          @for (payment of paymentList; track payment.id) {
            <tr class="hover:bg-muted/50">
              <td class="px-6 py-5 font-semibold text-base">{{ payment.reference }}</td>
              <td class="px-6 py-5 font-medium text-base">{{ payment.amount | currency }}</td>
              <td class="px-6 py-5">
                <app-badge [variant]="payment.status === 'completed' ? 'success' : 'warning'">
                  {{ payment.status }}
                </app-badge>
              </td>
              <td class="px-6 py-5 text-base">{{ payment.created_at | date }}</td>
              <td class="px-6 py-5">
                @if (payment.status === 'pending') {
                  <app-button-helm size="sm" (click)="makePayment(payment.id)">Pay Now</app-button-helm>
                }
                @if (payment.status === 'completed') {
                  <app-button-helm size="sm" (click)="downloadCertificate(payment.id)">Certificate</app-button-helm>
                }
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
    </div>

    <!-- Mobile Card View -->
    <div class="space-y-4 lg:hidden">
      @if (payments(); as paymentList) {
        @for (payment of paymentList; track payment.id) {
          <div class="rounded-lg border-2 border-border bg-card p-5 shadow-sm">
            <div class="mb-4 flex items-start justify-between gap-4">
              <div class="flex-1">
                <p class="mb-1.5 text-sm text-muted-foreground">Reference</p>
                <p class="text-base font-semibold">{{ payment.reference }}</p>
              </div>
              <app-badge [variant]="payment.status === 'completed' ? 'success' : 'warning'" class="shrink-0">
                {{ payment.status }}
              </app-badge>
            </div>
            <div class="mb-4 grid grid-cols-2 gap-4">
              <div>
                <p class="mb-1.5 text-sm text-muted-foreground">Amount</p>
                <p class="text-lg font-semibold">{{ payment.amount | currency }}</p>
              </div>
              <div>
                <p class="mb-1.5 text-sm text-muted-foreground">Date</p>
                <p class="text-base">{{ payment.created_at | date: 'short' }}</p>
              </div>
            </div>
            @if (payment.status === 'pending') {
              <app-button-helm size="sm" (click)="makePayment(payment.id)" class="w-full">Pay Now</app-button-helm>
            }
            @if (payment.status === 'completed') {
              <app-button-helm size="sm" (click)="downloadCertificate(payment.id)" class="w-full">Download Certificate</app-button-helm>
            }
          </div>
        }
      }
    </div>
  </div>
</div>
