<!-- Manage Executives Page -->
<div class="space-y-8 p-8">
  <!-- Page Header -->
  <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
    <div>
      <h1 class="text-4xl font-bold text-foreground tracking-tight">Association Executives</h1>
      <p class="mt-3 text-lg text-muted-foreground">
        Manage and assign executive roles across the organization hierarchy
      </p>
    </div>
    @if (canEdit()) {
      <button
        (click)="openCreateModal()"
        [disabled]="loading()"
        class="inline-flex items-center gap-3 rounded-xl border-2 border-rose-600 dark:border-rose-500 bg-transparent hover:bg-rose-50 dark:hover:bg-rose-900/20 px-8 py-4 text-lg font-semibold text-rose-600 dark:text-rose-500 transition-all whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
        </svg>
        Add Executive
      </button>
    }
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <!-- National Admins Card -->
    <div class="group relative rounded-lg border border-border bg-card px-4 py-3 shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md hover:border-rose-200 dark:hover:border-rose-800">
      <div class="absolute left-0 top-0 bottom-0 w-1 bg-rose-500 transition-all duration-200 group-hover:w-1.5"></div>
      <div class="flex items-center justify-between">
        <div>
          <p class="text-xs font-medium text-muted-foreground">National Admins</p>
          <p class="text-2xl font-bold tracking-tight text-foreground">{{ nationalAdminCount() }}</p>
        </div>
        <div class="flex h-9 w-9 items-center justify-center rounded-lg bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Regional Admins Card -->
    <div class="group relative rounded-lg border border-border bg-card px-4 py-3 shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md hover:border-rose-200 dark:hover:border-rose-800">
      <div class="absolute left-0 top-0 bottom-0 w-1 bg-rose-500 transition-all duration-200 group-hover:w-1.5"></div>
      <div class="flex items-center justify-between">
        <div>
          <p class="text-xs font-medium text-muted-foreground">Regional Admins</p>
          <p class="text-2xl font-bold tracking-tight text-foreground">{{ regionalAdminCount() }}</p>
        </div>
        <div class="flex h-9 w-9 items-center justify-center rounded-lg bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Zonal Admins Card -->
    <div class="group relative rounded-lg border border-border bg-card px-4 py-3 shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md hover:border-rose-200 dark:hover:border-rose-800">
      <div class="absolute left-0 top-0 bottom-0 w-1 bg-rose-500 transition-all duration-200 group-hover:w-1.5"></div>
      <div class="flex items-center justify-between">
        <div>
          <p class="text-xs font-medium text-muted-foreground">Zonal Admins</p>
          <p class="text-2xl font-bold tracking-tight text-foreground">{{ zonalAdminCount() }}</p>
        </div>
        <div class="flex h-9 w-9 items-center justify-center rounded-lg bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- Filters & Search Section -->
  <div class="rounded-xl border border-border bg-card p-6 shadow-sm space-y-5">
    <!-- Filter Dropdowns -->
    <div class="flex flex-wrap items-center gap-4">
      <span class="text-sm font-semibold text-muted-foreground uppercase tracking-wider">Filters:</span>

      <!-- Role Filter -->
      <div class="w-full sm:w-64">
        <ng-select
          [items]="roleOptions"
          bindLabel="label"
          bindValue="value"
          [ngModel]="filterRole()"
          (ngModelChange)="onFilterRoleChange($event || '')"
          placeholder="All Roles"
          [clearable]="true"
          [searchable]="false"
          class="ng-select-custom ng-select-lg"
        ></ng-select>
      </div>

      <!-- Region Filter -->
      <div class="w-full sm:w-64">
        <ng-select
          [items]="regions()"
          bindLabel="name"
          bindValue="id"
          [ngModel]="filterRegion()"
          (ngModelChange)="onFilterRegionChange($event)"
          placeholder="All Regions"
          [clearable]="true"
          [searchable]="true"
          class="ng-select-custom ng-select-lg"
        ></ng-select>
      </div>

      <!-- Zone Filter -->
      @if (filterRegion()) {
        <div class="w-full sm:w-64">
          <ng-select
            [items]="filterZonesForDropdown()"
            bindLabel="name"
            bindValue="id"
            [ngModel]="filterZone()"
            (ngModelChange)="onFilterZoneChange($event)"
            placeholder="All Zones"
            [clearable]="true"
            [searchable]="true"
            class="ng-select-custom ng-select-lg"
          ></ng-select>
        </div>
      }

      <!-- Position Filter -->
      <div class="w-full sm:w-64">
        <ng-select
          [items]="positions()"
          bindLabel="name"
          bindValue="id"
          [ngModel]="filterPosition()"
          (ngModelChange)="onFilterPositionChange($event)"
          placeholder="All Positions"
          [clearable]="true"
          [searchable]="true"
          class="ng-select-custom ng-select-lg"
        ></ng-select>
      </div>

      <!-- Clear Filters Button -->
      @if (hasActiveFilters()) {
        <button
          (click)="clearFilters()"
          class="inline-flex items-center justify-center gap-2 h-12 px-5 text-base font-medium text-muted-foreground bg-muted hover:bg-muted/80 rounded-xl transition-colors"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
          Clear
        </button>
      }
    </div>

    <!-- Search Row -->
    <div class="flex flex-col sm:flex-row gap-4">
      <!-- Search Input -->
      <div class="relative w-full sm:w-96 sm:ml-20">
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <svg class="h-5 w-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
        </div>
        <input
          type="text"
          [(ngModel)]="searchQuery"
          (ngModelChange)="onSearchChange($event)"
          placeholder="Search by name or exec no..."
          class="block w-full h-12 pl-11 pr-4 text-base border border-border rounded-xl bg-background focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all placeholder:text-muted-foreground"
        />
      </div>
    </div>
  </div>

  <!-- Two Column Grid Layout -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
    <!-- Left Column: Executives List -->
    <div class="lg:col-span-1 flex flex-col">
      <div class="rounded-xl border border-border bg-card shadow-sm overflow-hidden flex-1 flex flex-col">
        <!-- List Header -->
        <div class="px-5 py-4 border-b border-border">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div class="w-1.5 h-5 bg-rose-500 rounded-full"></div>
              <h3 class="text-base font-semibold text-foreground">Executives</h3>
            </div>
            @if (totalItems() > 0) {
              <span class="inline-flex items-center px-3 py-1 rounded-lg bg-muted text-sm font-medium text-muted-foreground">
                {{ totalItems() }}
              </span>
            }
          </div>
        </div>

        @if (loading()) {
          <div class="flex items-center justify-center py-24 flex-1">
            <div class="flex flex-col items-center gap-5">
              <div class="relative">
                <div class="animate-spin rounded-full h-12 w-12 border-3 border-rose-200 dark:border-rose-800"></div>
                <div class="absolute inset-0 animate-spin rounded-full h-12 w-12 border-3 border-transparent border-t-rose-600"></div>
              </div>
              <p class="text-base text-muted-foreground">Loading executives...</p>
            </div>
          </div>
        } @else if (executives().length === 0) {
          <!-- Empty State -->
          <div class="flex flex-col items-center justify-center py-20 px-8 flex-1">
            <div class="relative mb-8">
              <div class="flex h-24 w-24 items-center justify-center rounded-2xl bg-muted">
                <svg class="w-12 h-12 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
              </div>
              <div class="absolute -bottom-1 -right-1 h-8 w-8 rounded-full bg-rose-100 dark:bg-rose-900/50 flex items-center justify-center">
                <svg class="w-4 h-4 text-rose-600 dark:text-rose-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                </svg>
              </div>
            </div>
            <h3 class="text-lg font-semibold text-foreground mb-2">No executives found</h3>
            <p class="text-base text-muted-foreground text-center max-w-[250px]">
              @if (hasActiveFilters()) {
                Try adjusting your filters to find what you're looking for
              } @else {
                Get started by adding your first executive
              }
            </p>
          </div>
        } @else {
          <!-- Executives List -->
          <div class="divide-y divide-border flex-1 overflow-y-auto">
            @for (executive of executives(); track executive.id) {
              <div
                (click)="selectExecutive(executive)"
                [class]="'group p-5 cursor-pointer transition-all duration-150 ' +
                  (isSelected(executive)
                    ? 'bg-rose-50 dark:bg-rose-950/30 border-l-4 border-l-rose-600'
                    : 'hover:bg-muted/50 border-l-4 border-l-transparent')"
              >
                <div class="flex items-center gap-4">
                  <div class="relative">
                    <div class="flex h-14 w-14 shrink-0 items-center justify-center rounded-full bg-rose-100 dark:bg-rose-900/40 text-rose-600 dark:text-rose-400 font-bold text-lg transition-transform duration-150 group-hover:scale-105">
                      {{ getInitials(executive) }}
                    </div>
                    <span [class]="'absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 border-card ' + (executive.status === 'active' ? 'bg-green-500' : 'bg-gray-400')"></span>
                  </div>
                  <div class="flex-1 min-w-0">
                    <p class="text-base font-semibold text-foreground truncate leading-tight">
                      {{ executive.first_name }} {{ executive.last_name }}
                    </p>
                    @if (executive.executive_no) {
                      <p class="text-sm font-bold text-rose-600 dark:text-rose-400 mt-0.5">
                        {{ executive.executive_no }}
                      </p>
                    }
                    <p class="text-sm text-muted-foreground truncate mt-1">
                      {{ executive.position_name || 'No position' }}
                    </p>
                    <span [class]="'inline-flex items-center mt-2 px-2.5 py-1 rounded-md text-xs font-semibold uppercase tracking-wide ' + getRoleBadgeClass(executive.role)">
                      {{ getRoleLabel(executive.role) }}
                    </span>
                  </div>
                  <svg [class]="'w-5 h-5 text-muted-foreground shrink-0 transition-transform duration-150 ' + (isSelected(executive) ? 'text-rose-600' : 'group-hover:translate-x-0.5')" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                </div>
              </div>
            }
          </div>

          <!-- Pagination -->
          @if (totalPages() > 1) {
            <div class="px-5 py-4 border-t border-border bg-muted/30">
              <div class="flex items-center justify-between">
                <span class="text-sm text-muted-foreground">
                  Page <span class="font-semibold text-foreground">{{ currentPage() }}</span> of {{ totalPages() }}
                </span>
                <div class="flex items-center gap-2">
                  <button
                    (click)="onPageChange(currentPage() - 1)"
                    [disabled]="currentPage() === 1"
                    class="inline-flex items-center justify-center w-11 h-11 rounded-lg border border-border bg-background text-foreground hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                  </button>
                  <button
                    (click)="onPageChange(currentPage() + 1)"
                    [disabled]="currentPage() === totalPages()"
                    class="inline-flex items-center justify-center w-11 h-11 rounded-lg border border-border bg-background text-foreground hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          }
        }
      </div>
    </div>

    <!-- Right Column: Executive Profile -->
    <div class="lg:col-span-2">
      @if (viewingExecutive(); as executive) {
        <div class="rounded-xl border border-border bg-card shadow-sm overflow-hidden">
          <!-- Profile Header -->
          <div class="relative px-8 py-8 border-b border-border">
            <div class="absolute left-0 top-0 bottom-0 w-1.5 bg-rose-500"></div>
            <div class="flex flex-col sm:flex-row items-center sm:items-start gap-6">
              <!-- Avatar -->
              <div class="relative">
                <div class="flex h-24 w-24 shrink-0 items-center justify-center rounded-2xl bg-rose-100 dark:bg-rose-900/40 text-rose-600 dark:text-rose-400 text-3xl font-bold">
                  {{ getInitials(executive) }}
                </div>
                <span [class]="'absolute -bottom-1 -right-1 w-7 h-7 rounded-full border-3 border-card flex items-center justify-center ' + (executive.status === 'active' ? 'bg-green-500' : 'bg-gray-400')">
                  @if (executive.status === 'active') {
                    <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                  }
                </span>
              </div>
              <!-- Info -->
              <div class="text-center sm:text-left flex-1 min-w-0">
                <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4">
                  <h2 class="text-2xl font-bold text-foreground truncate">
                    {{ executive.first_name }} {{ executive.last_name }}
                  </h2>
                  @if (executive.executive_no) {
                    <span class="inline-flex items-center gap-2 px-4 py-1.5 bg-rose-100 dark:bg-rose-900/40 text-rose-700 dark:text-rose-300 rounded-lg text-base font-bold tracking-wide">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"/>
                      </svg>
                      {{ executive.executive_no }}
                    </span>
                  }
                </div>
                <p class="text-lg text-muted-foreground mt-2 truncate">
                  {{ executive.position_name || 'No position assigned' }}
                </p>
                <div class="flex flex-wrap items-center justify-center sm:justify-start gap-3 mt-4">
                  <span [class]="'inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-semibold ' + getRoleBadgeClass(executive.role)">
                    {{ getRoleLabel(executive.role) }}
                  </span>
                  <span [class]="'inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-semibold ' + getStatusBadgeClass(executive.status)">
                    {{ executive.status === 'active' ? 'Active' : 'Inactive' }}
                  </span>
                </div>
              </div>
              <!-- Actions -->
              @if (canEdit()) {
                <div class="flex gap-3 shrink-0">
                  <button
                    (click)="openEditModal(executive)"
                    class="inline-flex items-center justify-center w-12 h-12 border border-border bg-background hover:bg-muted text-foreground rounded-xl transition-colors"
                    title="Edit"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                    </svg>
                  </button>
                  <button
                    (click)="openDeleteDialog(executive)"
                    class="inline-flex items-center justify-center w-12 h-12 border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded-xl transition-colors"
                    title="Delete"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                  </button>
                </div>
              }
            </div>
          </div>

          <!-- Profile Content -->
          <div class="p-8 space-y-8">
            <!-- Contact Information -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div class="space-y-5">
                <h3 class="text-base font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-3">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                  </svg>
                  Contact Information
                </h3>
                <div class="space-y-4">
                  <div class="flex items-center gap-4 p-4 bg-muted/50 rounded-xl transition-colors hover:bg-muted">
                    <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400">
                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                      </svg>
                    </div>
                    <div>
                      <p class="text-sm text-muted-foreground font-medium">Email Address</p>
                      <p class="text-base font-semibold text-foreground">{{ executive.email }}</p>
                    </div>
                  </div>
                  @if (executive.mobile_no) {
                    <div class="flex items-center gap-4 p-4 bg-muted/50 rounded-xl transition-colors hover:bg-muted">
                      <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm text-muted-foreground font-medium">Phone Number</p>
                        <p class="text-base font-semibold text-foreground">{{ executive.mobile_no }}</p>
                      </div>
                    </div>
                  }
                </div>
              </div>

              <!-- Assignment Information -->
              <div class="space-y-5">
                <h3 class="text-base font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-3">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                  </svg>
                  Assignment Details
                </h3>
                <div class="space-y-4">
                  @if (executive.region_name) {
                    <div class="flex items-center gap-4 p-4 bg-muted/50 rounded-xl transition-colors hover:bg-muted">
                      <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm text-muted-foreground font-medium">Assigned Region</p>
                        <p class="text-base font-semibold text-foreground">{{ executive.region_name }}</p>
                      </div>
                    </div>
                  }
                  @if (executive.zone_name) {
                    <div class="flex items-center gap-4 p-4 bg-muted/50 rounded-xl transition-colors hover:bg-muted">
                      <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm text-muted-foreground font-medium">Assigned Zone</p>
                        <p class="text-base font-semibold text-foreground">{{ executive.zone_name }}</p>
                      </div>
                    </div>
                  }
                  @if (!executive.region_name && !executive.zone_name) {
                    <div class="flex items-center gap-4 p-4 bg-muted/50 rounded-xl transition-colors hover:bg-muted">
                      <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm text-muted-foreground font-medium">Assignment</p>
                        <p class="text-base font-semibold text-foreground">National Level</p>
                      </div>
                    </div>
                  }
                </div>
              </div>
            </div>

            <!-- Bio Section -->
            @if (executive.bio) {
              <div class="space-y-4">
                <h3 class="text-base font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-3">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
                  </svg>
                  Biography
                </h3>
                <div class="p-5 bg-muted/50 rounded-xl">
                  <p class="text-base text-foreground leading-relaxed">{{ executive.bio }}</p>
                </div>
              </div>
            }

            <!-- Meta Information -->
            <div class="pt-5 border-t border-border">
              <div class="flex flex-wrap items-center gap-6 text-sm text-muted-foreground">
                <span class="flex items-center gap-2">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                  </svg>
                  Added {{ executive.created_at | date:'mediumDate' }}
                </span>
              </div>
            </div>
          </div>
        </div>
      } @else {
        <!-- No Executive Selected State -->
        <div class="rounded-xl border border-dashed border-border bg-muted/30 min-h-[450px] flex items-center justify-center">
          <div class="text-center px-10 py-16">
            <div class="relative inline-block mb-8">
              <div class="flex h-28 w-28 items-center justify-center rounded-2xl bg-muted mx-auto">
                <svg class="w-14 h-14 text-muted-foreground/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
              </div>
              <div class="absolute -top-2 -right-2 w-10 h-10 rounded-full bg-rose-100 dark:bg-rose-900/50 flex items-center justify-center animate-pulse">
                <svg class="w-5 h-5 text-rose-600 dark:text-rose-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"/>
                </svg>
              </div>
            </div>
            <h3 class="text-xl font-semibold text-foreground mb-3">Select an Executive</h3>
            <p class="text-base text-muted-foreground max-w-sm mx-auto leading-relaxed">
              Choose an executive from the list to view their complete profile and details.
            </p>
          </div>
        </div>
      }
    </div>
  </div>
</div>

<!-- Create/Edit Modal -->
@if (showModal()) {
  <div class="fixed inset-0 z-50 overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <!-- Background overlay -->
      <div
        class="fixed inset-0 transition-opacity bg-black/50 backdrop-blur-sm"
        (click)="closeModal()"
      ></div>

      <!-- Modal panel -->
      <div class="relative z-10 inline-block w-full max-w-3xl overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-card rounded-2xl shadow-2xl">
        <!-- Header -->
        <div class="relative px-8 py-6 border-b border-border">
          <div class="absolute left-0 top-0 bottom-0 w-1.5 bg-rose-500"></div>
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-2xl font-bold text-foreground">
                {{ isEditing() ? 'Edit Executive' : 'Add New Executive' }}
              </h3>
              <p class="text-muted-foreground text-base mt-2">
                {{ isEditing() ? 'Update executive details and role assignment' : 'Fill in the details to add a new executive' }}
              </p>
            </div>
            <button
              (click)="closeModal()"
              class="text-muted-foreground hover:text-foreground transition-colors p-3 rounded-xl hover:bg-muted"
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Modal body -->
        <div class="px-8 py-8 space-y-8 max-h-[60vh] overflow-y-auto">
          <!-- Personal Information Section -->
          <div>
            <h4 class="text-base font-semibold text-muted-foreground uppercase tracking-wider mb-5 flex items-center gap-3">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
              </svg>
              Personal Information
            </h4>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
              <div>
                <label class="block text-base font-semibold text-foreground mb-3">
                  First Name <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  [ngModel]="formData().first_name"
                  (ngModelChange)="updateFormField('first_name', $event)"
                  placeholder="e.g., John"
                  class="w-full px-5 py-4 text-base border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all bg-background text-foreground placeholder:text-muted-foreground"
                />
              </div>
              <div>
                <label class="block text-base font-semibold text-foreground mb-3">
                  Last Name <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  [ngModel]="formData().last_name"
                  (ngModelChange)="updateFormField('last_name', $event)"
                  placeholder="e.g., Doe"
                  class="w-full px-5 py-4 text-base border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all bg-background text-foreground placeholder:text-muted-foreground"
                />
              </div>
            </div>
          </div>

          <!-- Contact Information Section -->
          <div>
            <h4 class="text-base font-semibold text-muted-foreground uppercase tracking-wider mb-5 flex items-center gap-3">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
              Contact Information
            </h4>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
              <div>
                <label class="block text-base font-semibold text-foreground mb-3">
                  Email Address <span class="text-red-500">*</span>
                </label>
                <input
                  type="email"
                  [ngModel]="formData().email"
                  (ngModelChange)="updateFormField('email', $event)"
                  placeholder="e.g., john.doe@example.com"
                  class="w-full px-5 py-4 text-base border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all bg-background text-foreground placeholder:text-muted-foreground"
                />
              </div>
              <div>
                <label class="block text-base font-semibold text-foreground mb-3">
                  Phone Number
                </label>
                <input
                  type="tel"
                  [ngModel]="formData().mobile_no"
                  (ngModelChange)="updateFormField('mobile_no', $event)"
                  placeholder="e.g., +233 20 123 4567"
                  class="w-full px-5 py-4 text-base border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all bg-background text-foreground placeholder:text-muted-foreground"
                />
              </div>
            </div>
          </div>

          <!-- Role & Assignment Section -->
          <div>
            <h4 class="text-base font-semibold text-muted-foreground uppercase tracking-wider mb-5 flex items-center gap-3">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
              </svg>
              Role & Assignment
            </h4>
            <div class="space-y-5">
              <!-- Position -->
              <div>
                <label class="block text-base font-semibold text-foreground mb-3">
                  Position
                </label>
                <ng-select
                  [items]="positions()"
                  bindLabel="name"
                  bindValue="id"
                  [ngModel]="formData().position_id"
                  (ngModelChange)="updateFormField('position_id', $event)"
                  placeholder="Select a position..."
                  [clearable]="true"
                  [searchable]="true"
                  class="ng-select-custom ng-select-lg"
                ></ng-select>
              </div>

              <!-- Admin Role -->
              <div>
                <label class="block text-base font-semibold text-foreground mb-3">
                  Admin Role <span class="text-red-500">*</span>
                </label>
                <div class="grid grid-cols-3 gap-4">
                  @for (option of roleOptions; track option.value) {
                    <button
                      type="button"
                      (click)="onRoleChange(option.value)"
                      [class]="'flex flex-col items-center p-5 rounded-xl border-2 transition-all duration-150 ' +
                        (formData().role === option.value
                          ? 'border-rose-600 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 shadow-sm'
                          : 'border-border hover:border-rose-300 dark:hover:border-rose-700 text-muted-foreground hover:text-foreground')"
                    >
                      <svg class="w-8 h-8 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        @if (option.value === 'national_admin') {
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
                        } @else if (option.value === 'region_admin') {
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                        } @else {
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                        }
                      </svg>
                      <span class="text-base font-semibold text-center">{{ option.label }}</span>
                    </button>
                  }
                </div>
              </div>

              <!-- Region Selection (shown for Regional and Zonal Admin) -->
              @if (showRegionField()) {
                <div class="animate-in fade-in slide-in-from-top-2 duration-200">
                  <label class="block text-base font-semibold text-foreground mb-3">
                    Assigned Region <span class="text-red-500">*</span>
                  </label>
                  <ng-select
                    [items]="regions()"
                    bindLabel="name"
                    bindValue="id"
                    [ngModel]="formData().region_id"
                    (ngModelChange)="onRegionChange($event)"
                    placeholder="Select a region..."
                    [clearable]="true"
                    [searchable]="true"
                    class="ng-select-custom ng-select-lg"
                  ></ng-select>
                </div>
              }

              <!-- Zone Selection (shown only for Zonal Admin) -->
              @if (showZoneField()) {
                <div class="animate-in fade-in slide-in-from-top-2 duration-200">
                  <label class="block text-base font-semibold text-foreground mb-3">
                    Assigned Zone <span class="text-red-500">*</span>
                  </label>
                  <ng-select
                    [items]="filteredZones()"
                    bindLabel="name"
                    bindValue="id"
                    [ngModel]="formData().zone_id"
                    (ngModelChange)="updateFormField('zone_id', $event)"
                    [disabled]="!formData().region_id"
                    [placeholder]="formData().region_id ? 'Select a zone...' : 'Please select a region first'"
                    [clearable]="true"
                    [searchable]="true"
                    class="ng-select-custom ng-select-lg"
                  ></ng-select>
                </div>
              }

              <!-- Status -->
              <div>
                <label class="block text-base font-semibold text-foreground mb-3">
                  Status
                </label>
                <div class="flex gap-6">
                  <label class="flex items-center gap-4 cursor-pointer py-2">
                    <input
                      type="radio"
                      name="status"
                      value="active"
                      [checked]="formData().status === 'active'"
                      (change)="updateFormField('status', 'active')"
                      class="w-6 h-6 text-rose-600 border-gray-300 focus:ring-rose-500"
                    />
                    <span class="text-base font-medium text-foreground">Active</span>
                  </label>
                  <label class="flex items-center gap-4 cursor-pointer py-2">
                    <input
                      type="radio"
                      name="status"
                      value="inactive"
                      [checked]="formData().status === 'inactive'"
                      (change)="updateFormField('status', 'inactive')"
                      class="w-6 h-6 text-rose-600 border-gray-300 focus:ring-rose-500"
                    />
                    <span class="text-base font-medium text-foreground">Inactive</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Bio Section -->
          <div>
            <h4 class="text-base font-semibold text-muted-foreground uppercase tracking-wider mb-5 flex items-center gap-3">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
              </svg>
              Additional Information
            </h4>
            <div>
              <label class="block text-base font-semibold text-foreground mb-3">
                Bio / Description
              </label>
              <textarea
                [ngModel]="formData().bio"
                (ngModelChange)="updateFormField('bio', $event)"
                rows="4"
                placeholder="Brief description about the executive..."
                class="w-full px-5 py-4 text-base border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent transition-all bg-background text-foreground placeholder:text-muted-foreground resize-none"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Modal footer -->
        <div class="bg-muted/50 px-8 py-5 flex items-center justify-end gap-4 border-t border-border">
          <button
            type="button"
            (click)="closeModal()"
            class="px-8 py-3.5 border border-border rounded-xl text-base font-semibold text-foreground bg-background hover:bg-muted focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-all"
          >
            Cancel
          </button>
          <button
            type="button"
            (click)="onSubmit()"
            [disabled]="!isFormValid() || loading()"
            class="px-8 py-3.5 border-2 border-rose-600 bg-rose-600 hover:bg-rose-700 hover:border-rose-700 text-white rounded-xl text-base font-semibold shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
          >
            @if (loading()) {
              <span class="flex items-center gap-3">
                <svg class="animate-spin h-5 w-5" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Saving...
              </span>
            } @else {
              {{ isEditing() ? 'Update Executive' : 'Add Executive' }}
            }
          </button>
        </div>
      </div>
    </div>
  </div>
}

<!-- Delete Confirmation Dialog -->
@if (showDeleteDialog() && executiveToDelete()) {
  <div class="fixed inset-0 z-50 overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <!-- Background overlay -->
      <div
        class="fixed inset-0 transition-opacity bg-black/50 backdrop-blur-sm"
        (click)="showDeleteDialog.set(false)"
      ></div>

      <!-- Modal panel -->
      <div class="relative z-10 inline-block w-full max-w-lg overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-card rounded-2xl shadow-2xl">
        <div class="px-8 pt-8 pb-6">
          <div class="flex items-start gap-5">
            <div class="shrink-0 w-14 h-14 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center">
              <svg class="w-7 h-7 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
              </svg>
            </div>
            <div class="flex-1">
              <h3 class="text-xl font-bold text-foreground mb-3">Remove Executive</h3>
              <p class="text-base text-muted-foreground leading-relaxed">
                Are you sure you want to remove <span class="font-semibold text-foreground">{{ executiveToDelete()!.first_name }} {{ executiveToDelete()!.last_name }}</span> from the executive list?
                This action cannot be undone.
              </p>
            </div>
          </div>
        </div>
        <div class="bg-muted/50 px-8 py-5 flex items-center justify-end gap-4 border-t border-border">
          <button
            type="button"
            (click)="showDeleteDialog.set(false)"
            class="px-7 py-3.5 border border-border rounded-xl text-base font-semibold text-foreground bg-background hover:bg-muted focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-all"
          >
            Cancel
          </button>
          <button
            type="button"
            (click)="confirmDelete()"
            [disabled]="loading()"
            class="px-7 py-3.5 bg-red-600 border-2 border-red-600 text-white rounded-xl text-base font-semibold hover:bg-red-700 hover:border-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all disabled:opacity-50"
          >
            @if (loading()) {
              <span class="flex items-center gap-3">
                <svg class="animate-spin h-5 w-5" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Removing...
              </span>
            } @else {
              Remove Executive
            }
          </button>
        </div>
      </div>
    </div>
  </div>
}
