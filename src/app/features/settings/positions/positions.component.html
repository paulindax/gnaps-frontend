<div>
  <!-- Header with Create Button -->
  <div class="mb-6 flex items-center justify-between">
    <h2 class="text-xl font-semibold sm:text-2xl">Manage Positions</h2>
    @if (canEdit()) {
      <app-button-helm (click)="openCreateModal()" [disabled]="loading()">
        + Create Position
      </app-button-helm>
    }
  </div>

  <!-- Reusable Data Table -->
  <app-data-table
    [data]="positions()"
    [columns]="tableColumns"
    [loading]="loading()"
    [pagination]="paginationData()"
    [showSearch]="true"
    [searchQuery]="searchQuery()"
    searchPlaceholder="Search positions by name..."
    [actions]="canEdit() ? tableActions : []"
    [showActions]="canEdit()"
    emptyMessage="No positions found. Click 'Create Position' to add one."
    (pageChange)="onPageChange($event)"
    (searchChange)="onSearchChange($event)"
  />

  <!-- Reusable Form Modal -->
  <app-form-modal
    [show]="showModal()"
    [title]="isEditing() ? 'Edit Position' : 'Create Position'"
    [loading]="loading()"
    [submitLabel]="isEditing() ? 'Update' : 'Create'"
    (close)="closeModal()"
    (submit)="onSubmit()"
  >
    <div class="mb-6">
      <label class="mb-2 block text-sm font-medium">Name *</label>
      <input
        type="text"
        [value]="formData().name"
        (input)="updateFormField('name', $any($event.target).value)"
        class="w-full rounded-md border border-border bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"
        placeholder="Enter position name"
        required
      />
    </div>
  </app-form-modal>

  <!-- Confirm Delete Dialog -->
  @if (showDeleteDialog() && positionToDelete()) {
    <app-confirm-dialog
      [show]="showDeleteDialog()"
      title="Delete Position"
      [message]="'Are you sure you want to delete the position ' + positionToDelete()!.name + '? This action cannot be undone.'"
      confirmLabel="Delete"
      confirmClass="bg-destructive text-destructive-foreground hover:bg-destructive/90"
      (confirm)="confirmDelete()"
      (cancel)="showDeleteDialog.set(false)"
    />
  }
</div>
