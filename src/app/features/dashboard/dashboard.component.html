<div class="w-full min-h-screen bg-background">
  <div class="mx-auto max-w-6xl px-4 py-6 sm:px-6 sm:py-8 lg:px-8 lg:py-10">
    <!-- Header -->
    <!-- <div class="mb-8 sm:mb-10 lg:mb-12">
      <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between sm:gap-6">
        <h1 class="text-2xl font-bold tracking-tight sm:text-3xl lg:text-4xl">Dashboard</h1>
        <app-button-helm variant="secondary" (click)="logout()" class="w-full sm:w-auto">
          Logout
        </app-button-helm>
      </div>
    </div> -->

    <!-- Dynamic Dashboard Based on Role -->
    @if (role(); as userRole) {
      <div class="space-y-6 sm:space-y-8">
        @switch (userRole) {
          @case ('system_admin') {
            <ng-container *ngTemplateOutlet="systemAdminView" />
          }
          @case ('national_admin') {
            <ng-container *ngTemplateOutlet="nationalView" />
          }
          @case ('regional_admin') {
            <ng-container *ngTemplateOutlet="regionalView" />
          }
          @case ('zone_admin') {
            <ng-container *ngTemplateOutlet="zoneView" />
          }
          @case ('school_user') {
            <ng-container *ngTemplateOutlet="schoolView" />
          }
        }
      </div>
    }

    <!-- Association News Alerts -->
    <!-- @if (recentNews().length > 0) { -->
      <div class="mt-8 rounded-lg border-2 border-border bg-card p-5 shadow-sm sm:mt-10 sm:p-6 lg:p-8">
        <div class="mb-4 flex items-center justify-between sm:mb-5">
          <h3 class="text-lg font-semibold sm:text-xl lg:text-2xl">ðŸ“° Association News</h3>
          <app-button-helm routerLink="/news" variant="ghost" size="sm">
            View All
          </app-button-helm>
        </div>
        <div class="space-y-4 sm:space-y-5">
          @for (item of recentNews(); track item.id) {
            <article class="rounded-lg border border-border bg-background p-4 transition-shadow hover:shadow-md sm:p-5">
              <div class="flex items-start gap-3 sm:gap-4">
                <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10 sm:h-12 sm:w-12">
                  <span class="text-xl sm:text-2xl">ðŸ“°</span>
                </div>
                <div class="flex-1">
                  <h4 class="mb-2 text-base font-semibold sm:text-lg">{{ item.title }}</h4>
                  <p class="mb-3 line-clamp-2 text-sm leading-relaxed text-muted-foreground sm:text-base">
                    {{ item.content }}
                  </p>
                  <time class="text-xs text-muted-foreground sm:text-sm">
                    {{ item.created_at | date: 'medium' }}
                  </time>
                </div>
              </div>
            </article>
          }
        </div>
      </div>
    <!-- } -->

    <!-- Quick Actions -->
    <div class="mt-8 rounded-lg border border-border bg-card p-5 shadow-sm sm:mt-10 sm:p-6 lg:p-8">
      <h3 class="mb-4 text-lg font-semibold sm:mb-5 sm:text-xl lg:text-2xl">Quick Actions</h3>
      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2 sm:gap-4 lg:flex lg:flex-wrap lg:gap-4">
        @if (role() === 'system_admin' || role() === 'national_admin' || role() === 'regional_admin' || role() === 'zone_admin') {
          <app-button-helm routerLink="/schools" class="w-full lg:w-auto">
            Manage Schools
          </app-button-helm>
        }
        @if (role() === 'school_user') {
          <app-button-helm routerLink="/payments" class="w-full lg:w-auto">
            View Payments
          </app-button-helm>
        }
        <app-button-helm routerLink="/news" class="w-full lg:w-auto">
          View News
        </app-button-helm>
      </div>
    </div>
  </div>
</div>

<!-- Role-Based Templates -->
<ng-template #systemAdminView>
  <div class="space-y-5 sm:space-y-6 lg:space-y-8">
    <h2 class="text-xl font-semibold tracking-tight sm:text-2xl lg:text-3xl">System Administrator</h2>
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:grid-cols-4 lg:gap-6">
      <app-card-helm title="Regions" [value]="stats()?.total_regions || 0" icon="ðŸ—ºï¸" />
      <app-card-helm title="Zones" [value]="stats()?.total_zones || 0" icon="ðŸ“" />
      <app-card-helm title="Schools" [value]="stats()?.total_schools || 0" icon="ðŸ«" />
      <app-card-helm title="Executives" [value]="stats()?.total_executives || 0" icon="ðŸ‘¥" />
      
      
    </div>
  </div>
</ng-template>

<ng-template #nationalView>
  <div class="space-y-5 sm:space-y-6 lg:space-y-8">
    <h2 class="text-xl font-semibold tracking-tight sm:text-2xl lg:text-3xl">National Overview</h2>
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:grid-cols-4 lg:gap-6">
      <app-card-helm title="Regions" [value]="stats()?.total_regions || 0" icon="ðŸ—ºï¸" />
      <app-card-helm title="Zones" [value]="stats()?.total_zones || 0" icon="ðŸ“" />
      <app-card-helm title="Schools" [value]="stats()?.total_schools || 0" icon="ðŸ«" />
      <app-card-helm title="Payments" [value]="stats()?.recent_payments || 0" icon="ðŸ’³" />
    </div>
  </div>
</ng-template>

<ng-template #regionalView>
  <div class="space-y-5 sm:space-y-6 lg:space-y-8">
    <h2 class="text-xl font-semibold tracking-tight sm:text-2xl lg:text-3xl">Regional Overview</h2>
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:grid-cols-3 lg:gap-6">
      <app-card-helm title="Total Zones" [value]="stats()?.total_zones || 0" icon="ðŸ“" />
      <app-card-helm title="Total Schools" [value]="stats()?.total_schools || 0" icon="ðŸ«" />
      <app-card-helm title="Pending Bills" [value]="stats()?.pending_bills || 0" icon="ðŸ’°" />
    </div>
  </div>
</ng-template>

<ng-template #zoneView>
  <div class="space-y-5 sm:space-y-6 lg:space-y-8">
    <h2 class="text-xl font-semibold tracking-tight sm:text-2xl lg:text-3xl">Zone Overview</h2>
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:gap-6">
      <app-card-helm title="Total Schools" [value]="stats()?.total_schools || 0" icon="ðŸ«" />
      <app-card-helm title="Active Schools" [value]="stats()?.pending_bills || 0" icon="âœ…" />
    </div>
  </div>
</ng-template>

<ng-template #schoolView>
  <div class="space-y-5 sm:space-y-6 lg:space-y-8">
    <h2 class="text-xl font-semibold tracking-tight sm:text-2xl lg:text-3xl">School Overview</h2>
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:gap-6">
      <app-card-helm title="Total Paid" [value]="(stats()?.total_payments || 0) | currency" icon="âœ…" />
      <app-card-helm title="Outstanding" [value]="(stats()?.outstanding_amount || 0) | currency" icon="âš ï¸" />
    </div>
  </div>
</ng-template>
